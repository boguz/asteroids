{"version":3,"file":"asteroids.js","sources":["../src/types/types.ts","../src/classes/Player.ts","../src/utils/utils.ts","../src/classes/Bullet.ts","../src/classes/Infos.ts","../src/classes/Roid.ts","../src/levels.ts","../src/utils/collisionDetection.ts","../src/classes/HitPoint.ts","../src/classes/PowerUp.ts","../src/asteroids.ts"],"sourcesContent":["export enum GameState {\n\t'START' = 'START',\n\t'GAME' = 'GAME',\n\t'GAME_OVER' = 'GAME_OVER',\n}\n\nexport interface PositionInterface {\n\tx: number;\n\ty: number;\n}\n\nexport interface KeysInterface {\n\tLEFT: boolean,\n\tRIGHT: boolean,\n\tUP: boolean,\n\tSPACE: boolean\n}\n\nexport interface LevelInterface {\n\tlevel: number,\n\tnumberOfRoids: number,\n\tmaxRoidGrade: number,\n\tmaxRoidSpeed: number,\n}\n","import { KeysInterface, PositionInterface } from \"../types/types.js\";\n\nexport class Player {\n\tprivate canvas: HTMLCanvasElement;\n\tprivate ctx: CanvasRenderingContext2D;\n\tpublic size: number;\n\tpublic radius: number;\n\tpublic pos: PositionInterface;\n\tprivate vel: { x: number; y: number };\n\tprivate colors: { ship: string, thrusterInner: string, thrusterOuter: string }\n\tpublic direction: number;\n\tprivate rotationSpeed: number;\n\tprivate isThrusting: boolean;\n\tprivate thrustSpeed: number;\n\tprivate friction: number;\n\tprivate invincible: boolean;\n\tprivate invincibleStart: number;\n\tprivate invincibilityTime: number;\n\tprivate opacity: number;\n\tprivate blinkTime: number;\n\t\n\tpublic startInvincibility() {\n\t\tthis.invincible = true;\n\t\tthis.invincibleStart = Date.now();\n\t}\n\t\n\tget isInvencible() {\n\t\treturn this.invincible;\n\t}\n\t\n\tconstructor(canvas: HTMLCanvasElement, ctx: CanvasRenderingContext2D, initialPosition: PositionInterface, color: string) {\n\t\tthis.canvas = canvas;\n\t\tthis.ctx = ctx;\n\t\tthis.size = 30;\n\t\tthis.radius = this.size / 2;\n\t\tthis.direction = 90 / 180 * Math.PI;\n\t\tthis.pos = {\n\t\t\tx: initialPosition.x,\n\t\t\ty: initialPosition.y\n\t\t}\n\t\tthis.vel = {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t};\n\t\tthis.colors = {\n\t\t\tship: color,\n\t\t\tthrusterInner: 'hsl(0, 74%, 50%)',\n\t\t\tthrusterOuter: 'hsl(41, 91%, 65%)'\n\t\t};\n\t\tthis.rotationSpeed = Math.PI / 50;\n\t\tthis.isThrusting = false;\n\t\tthis.thrustSpeed = .1;\n\t\tthis.friction = this.thrustSpeed / 12;\n\t\tthis.invincible = true;\n\t\tthis.invincibleStart = Date.now();\n\t\tthis.invincibilityTime = 3000;\n\t\tthis.opacity = 1;\n\t\tthis.blinkTime = 500;\n\t}\n\t\n\tdraw() {\n\t\tif (this.isThrusting) {\n\t\t\tthis.drawThruster();\n\t\t}\n\t\tthis.drawShip();\n\t\t\n\t\tif (this.invincible) {\n\t\t\tconst delta = Date.now() - this.invincibleStart;\n\t\t\tthis.opacity = delta % this.blinkTime < (this.blinkTime / 2) ? 0.25 : 0.75;\n\t\t}\n\t}\n\t\n\tdrawShip() {\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.globalAlpha = this.opacity;\n\t\tthis.ctx.moveTo( // nose of the ship\n\t\t\tthis.pos.x + 4 / 3 * this.radius * Math.cos(this.direction),\n\t\t\tthis.pos.y - 4 / 3 * this.radius * Math.sin(this.direction)\n\t\t);\n\t\tthis.ctx.lineTo( // rear left\n\t\t\tthis.pos.x - this.radius * (2 / 3 * Math.cos(this.direction) + Math.sin(this.direction)),\n\t\t\tthis.pos.y + this.radius * (2 / 3 * Math.sin(this.direction) - Math.cos(this.direction))\n\t\t);\n\t\tthis.ctx.lineTo( // rear right\n\t\t\tthis.pos.x - this.radius * (2 / 3 * Math.cos(this.direction) - Math.sin(this.direction)),\n\t\t\tthis.pos.y + this.radius * (2 / 3 * Math.sin(this.direction) + Math.cos(this.direction))\n\t\t);\n\t\tthis.ctx.closePath();\n\t\tthis.ctx.fillStyle = this.colors.ship;\n\t\tthis.ctx.fill();\n\t\tthis.ctx.globalAlpha = 1;\n\t}\n\t\n\tdrawThruster() {\n\t\tthis.ctx.globalAlpha = this.opacity;\n\t\tthis.ctx.fillStyle = this.colors.thrusterInner;\n\t\tthis.ctx.strokeStyle = this.colors.thrusterOuter;\n\t\tthis.ctx.lineWidth = this.size / 15;\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.moveTo( // rear left\n\t\t\tthis.pos.x - this.radius * (2 / 3 * Math.cos(this.direction) + 0.5 * Math.sin(this.direction)),\n\t\t\tthis.pos.y + this.radius * (2 / 3 * Math.sin(this.direction) - 0.5 * Math.cos(this.direction))\n\t\t);\n\t\tthis.ctx.lineTo( // rear centre (behind the ship)\n\t\t\tthis.pos.x - this.radius * 5 / 3 * Math.cos(this.direction),\n\t\t\tthis.pos.y + this.radius * 5 / 3 * Math.sin(this.direction)\n\t\t);\n\t\tthis.ctx.lineTo( // rear right\n\t\t\tthis.pos.x - this.radius * (2 / 3 * Math.cos(this.direction) - 0.5 * Math.sin(this.direction)),\n\t\t\tthis.pos.y + this.radius * (2 / 3 * Math.sin(this.direction) + 0.5 * Math.cos(this.direction))\n\t\t);\n\t\tthis.ctx.closePath();\n\t\tthis.ctx.fill();\n\t\tthis.ctx.stroke();\n\t\tthis.ctx.globalAlpha = 1;\n\t}\n\t\n\tupdate(KEYS: KeysInterface) {\n\t\tif (KEYS.RIGHT) {\n\t\t\tthis.direction -= this.rotationSpeed;\n\t\t}\n\t\tif (KEYS.LEFT) {\n\t\t\tthis.direction += this.rotationSpeed;\n\t\t}\n\t\tthis.isThrusting = KEYS.UP;\n\t\t\n\t\t// Thrust or friction\n\t\tif (this.isThrusting) {\n\t\t\tthis.vel.x += this.thrustSpeed * Math.cos(this.direction);\n\t\t\tthis.vel.y -= this.thrustSpeed * Math.sin(this.direction);\n\t\t} else {\n\t\t\tif (this.vel.x > 0) {\n\t\t\t\tthis.vel.x -= this.friction;\n\t\t\t} else if (this.vel.x < 0) {\n\t\t\t\tthis.vel.x += this.friction;\n\t\t\t}\n\t\t\tif (this.vel.y > 0) {\n\t\t\t\tthis.vel.y -= this.friction;\n\t\t\t} else if (this.vel.y < 0) {\n\t\t\t\tthis.vel.y += this.friction;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// update position\n\t\tthis.pos.x += this.vel.x;\n\t\tthis.pos.y += this.vel.y;\n\t\t\n\t\tif (this.pos.x < 0) {\n\t\t\tthis.pos.x = this.canvas.width;\n\t\t} else if (this.pos.x > this.canvas.width) {\n\t\t\tthis.pos.x = 0;\n\t\t}\n\t\t\n\t\tif (this.pos.y < 0) {\n\t\t\tthis.pos.y = this.canvas.height;\n\t\t} else if (this.pos.y > this.canvas.height) {\n\t\t\tthis.pos.y = 0;\n\t\t}\n\t\t\n\t\tconst timeNow = Date.now();\n\t\tif (timeNow - this.invincibleStart > this.invincibilityTime) {\n\t\t\tthis.invincible = false;\n\t\t\tthis.opacity = 1;\n\t\t}\n\t}\n}\n","export function utils(variableName: string): string {\n\treturn getComputedStyle(document.documentElement).getPropertyValue(variableName);\n}\n\n// min and max included\nexport function randomIntFromInterval(min: number, max: number): number {\n\treturn Math.floor(Math.random() * (max - min + 1) + min);\n}\n","import { PositionInterface } from \"../types/types.js\";\n\nexport class Bullet {\n\tprivate ctx: CanvasRenderingContext2D;\n\tpublic pos: PositionInterface;\n\tprivate direction: number;\n\tprivate grade: number;\n\tprivate color: string;\n\tsize: number;\n\tprivate vel: { x: number; y: number };\n\t\n\t\n\tconstructor(ctx: CanvasRenderingContext2D, pos: PositionInterface, direction: number, grade: number, color: string) {\n\t\tthis.ctx = ctx;\n\t\tthis.pos = pos;\n\t\tthis.direction = direction;\n\t\tthis.grade = grade;\n\t\tthis.color = color;\n\t\tthis.size = 3;\n\t\tthis.vel = {\n\t\t\tx: 5,\n\t\t\ty: 5,\n\t\t}\n\t}\n\t\n\tdraw() {\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.arc(this.pos.x, this.pos.y, this.size, 0, 2 * Math.PI);\n\t\tthis.ctx.fillStyle = this.color;\n\t\tthis.ctx.fill();\n\t\tthis.ctx.closePath();\n\t}\n\t\n\tupdate() {\n\t\tthis.pos.x += this.vel.x * Math.cos(this.direction);\n\t\tthis.pos.y -= this.vel.y * Math.sin(this.direction);\n\t}\n}\n","export class Infos {\n\tprivate levelEl: HTMLParagraphElement;\n\tprivate livesEl: HTMLParagraphElement;\n\tprivate scoreEl: HTMLParagraphElement;\n\t\n\tconstructor() {\n\t\tthis.levelEl = document.querySelector('.infos_level')!;\n\t\tthis.livesEl = document.querySelector('.infos_lives')!;\n\t\tthis.scoreEl = document.querySelector('.infos_score')!;\n\t}\n\t\n\tupdate(level: number, lives: number, score: number) {\n\t\tthis.levelEl.textContent = `Level:${level}`;\n\t\tthis.livesEl.textContent = `Lives:${lives}`;\n\t\tthis.scoreEl.textContent = `Score:${score}`;\n\t}\n}\n","import { PositionInterface } from \"../types/types.js\";\nimport { randomIntFromInterval } from \"../utils/utils.js\";\n\nexport class Roid {\n\tprivate canvas: HTMLCanvasElement;\n\tprivate ctx: CanvasRenderingContext2D;\n\tpublic pos: PositionInterface\n\tpublic grade: number;\n\tpublic size: number;\n\tprivate direction: number;\n\tprivate vel: { x: number, y: number };\n\tprivate speed: number;\n\tprivate color: string;\n\tpublic points: number;\n\t\n\tprivate sizes = [20, 30, 40, 50, 60];\n\tprivate possiblePoints = [400, 300, 200, 100, 50];\n\t\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\tctx: CanvasRenderingContext2D,\n\t\tgrade: number | null,\n\t\tmaxRoidGrade: number,\n\t\tmaxRoidSpeed: number,\n\t\tpossibleColors: string[],\n\t\tstartPos: PositionInterface | null)\n\t{\n\t\tthis.canvas = canvas;\n\t\tthis.ctx = ctx;\n\t\tthis.pos = startPos\n\t\t\t? startPos\n\t\t\t: {\n\t\t\tx: Math.floor(Math.random() * this.canvas.width),\n\t\t\ty: Math.floor(Math.random() * this.canvas.height),\n\t\t}\n\t\tthis.grade = grade ? grade : randomIntFromInterval(1, maxRoidGrade);\n\t\tthis.size = this.sizes[this.grade - 1];\n\t\tthis.direction = Math.random() * Math.PI * 2;\n\t\tthis.speed = randomIntFromInterval(1.5, maxRoidSpeed);\n\t\tthis.vel = {\n\t\t\tx: Math.random() * this.speed * (Math.random() < 0.5 ? 1 : -1),\n\t\t\ty: Math.random() * this.speed * (Math.random() < 0.5 ? 1 : -1),\n\t\t}\n\t\tthis.color = possibleColors[this.grade - 1];\n\t\tthis.points = this.possiblePoints[this.grade - 1];\n\t}\n\t\n\tupdate() {\n\t\tthis.pos.x += this.vel.x;\n\t\tthis.pos.y += this.vel.y\n\t\t\n\t\tif (this.pos.x < 0) {\n\t\t\tthis.pos.x = this.canvas.width;\n\t\t} else if (this.pos.x > this.canvas.width) {\n\t\t\tthis.pos.x = 0;\n\t\t}\n\t\t\n\t\tif (this.pos.y < 0) {\n\t\t\tthis.pos.y = this.canvas.height;\n\t\t} else if (this.pos.y > this.canvas.height) {\n\t\t\tthis.pos.y = 0;\n\t\t}\n\t}\n\t\n\tdraw() {\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.arc(this.pos.x, this.pos.y, this.size, 0, 2 * Math.PI);\n\t\tthis.ctx.fillStyle = this.color;\n\t\tthis.ctx.fill();\n\t\tthis.ctx.closePath();\n\t}\n}\n","import { LevelInterface } from \"./types/types.js\";\n\nexport const LEVELS: LevelInterface[] = [\n\t{\n\t\tlevel: 1,\n\t\tnumberOfRoids: 4,\n\t\tmaxRoidGrade: 3,\n\t\tmaxRoidSpeed: 2\n\t},\n\t{\n\t\tlevel: 2,\n\t\tnumberOfRoids: 4,\n\t\tmaxRoidGrade: 3,\n\t\tmaxRoidSpeed: 3\n\t},\n\t{\n\t\tlevel: 3,\n\t\tnumberOfRoids: 5,\n\t\tmaxRoidGrade: 4,\n\t\tmaxRoidSpeed: 3.5\n\t},\n\t{\n\t\tlevel: 4,\n\t\tnumberOfRoids: 5,\n\t\tmaxRoidGrade: 4,\n\t\tmaxRoidSpeed: 4\n\t},\n\t{\n\t\tlevel: 5,\n\t\tnumberOfRoids: 6,\n\t\tmaxRoidGrade: 4,\n\t\tmaxRoidSpeed: 4\n\t},\n\t{\n\t\tlevel: 6,\n\t\tnumberOfRoids: 6,\n\t\tmaxRoidGrade: 4,\n\t\tmaxRoidSpeed: 4\n\t},\n\t{\n\t\tlevel: 7,\n\t\tnumberOfRoids: 7,\n\t\tmaxRoidGrade: 4,\n\t\tmaxRoidSpeed: 4\n\t},\n\t{\n\t\tlevel: 8,\n\t\tnumberOfRoids: 8,\n\t\tmaxRoidGrade: 5,\n\t\tmaxRoidSpeed: 4\n\t},\n\t{\n\t\tlevel: 9,\n\t\tnumberOfRoids: 9,\n\t\tmaxRoidGrade: 5,\n\t\tmaxRoidSpeed: 5\n\t},\n\t{\n\t\tlevel: 10,\n\t\tnumberOfRoids: 10,\n\t\tmaxRoidGrade: 5,\n\t\tmaxRoidSpeed: 5\n\t},\n\t{\n\t\tlevel: 11,\n\t\tnumberOfRoids: 11,\n\t\tmaxRoidGrade: 5,\n\t\tmaxRoidSpeed: 5\n\t},\n\t{\n\t\tlevel: 12,\n\t\tnumberOfRoids: 12,\n\t\tmaxRoidGrade: 5,\n\t\tmaxRoidSpeed: 5\n\t},\n\t{\n\t\tlevel: 13,\n\t\tnumberOfRoids: 14,\n\t\tmaxRoidGrade: 5,\n\t\tmaxRoidSpeed: 5\n\t},\n\t{\n\t\tlevel: 14,\n\t\tnumberOfRoids: 17,\n\t\tmaxRoidGrade: 5,\n\t\tmaxRoidSpeed: 5\n\t},\n\t{\n\t\tlevel: 15,\n\t\tnumberOfRoids: 20,\n\t\tmaxRoidGrade: 5,\n\t\tmaxRoidSpeed: 5\n\t}\n]\n","import { Bullet } from \"../classes/Bullet.js\";\nimport { Roid } from \"../classes/Roid.js\";\nimport { Player } from \"../classes/Player.js\";\n\nexport function areTwoElementsColliding(elOne: Bullet | Player, elTwo: Roid): boolean {\n\tconst sideA = elOne.pos.x - elTwo.pos.x;\n\tconst sideB = elOne.pos.y - elTwo.pos.y;\n\tconst distance = Math.sqrt(sideA * sideA + sideB * sideB);\n\treturn distance <= (elOne.size + elTwo.size);\n}\n","import { PositionInterface } from \"../types/types.js\";\n\nexport class HitPoint {\n\tprivate ctx: CanvasRenderingContext2D;\n\tprivate pos: PositionInterface;\n\tprivate points: number;\n\tprivate ANIMATION_DURATION: number;\n\tprivate startTime: number;\n\tpublic opacity: number;\n\tprivate color: string;\n\t\n\tconstructor(\n\t\tctx: CanvasRenderingContext2D,\n\t\tpos: PositionInterface,\n\t\tpoints: number,\n\t\tcolor: string,\n\t) {\n\t\tthis.ctx = ctx;\n\t\tthis.pos = pos;\n\t\tthis.points = points;\n\t\tthis.ANIMATION_DURATION = 3000;\n\t\tthis.startTime = Date.now();\n\t\tthis.opacity = 1;\n\t\tthis.color = color;\n\t}\n\t\n\tupdate(currentTime: number) {\n\t\tconst delta = currentTime - this.startTime;\n\t\tthis.pos.y -= 1.5;\n\t\tthis.opacity -= .025;\n\t\tif (this.opacity <= 0.1) {\n\t\t\tthis.opacity = 0\n\t\t}\n\t}\n\t\n\tdraw() {\n\t\tthis.ctx.globalAlpha = this.opacity;\n\t\tthis.ctx.fillStyle = this.color;\n\t\tthis.ctx.font = \"20px sans-serif\";\n\t\tthis.ctx.textAlign = \"center\";\n\t\tthis.ctx.fillText(`${this.points}`,this.pos.x,this.pos.y);\n\t\tthis.ctx.globalAlpha = 1;\n\t}\n}\n","import { PositionInterface } from \"../types/types.js\";\n\nexport class PowerUp {\n\tprivate canvas: HTMLCanvasElement;\n\tprivate ctx: CanvasRenderingContext2D;\n\tpublic pos: PositionInterface\n\tpublic size: number;\n\tprivate direction: number;\n\tprivate vel: { x: number, y: number };\n\tprivate speed: number;\n\tprivate color: string;\n\tprivate sidesCount: number;\n\tprivate rotation: number;\n\tprivate rotationSpeed: number;\n\tprivate radians: number;\n\tpublic type: string;\n\tpublic bonusPoints: string;\n\t\n\tprivate possibleTypes = ['bonus', 'bonus', 'bonus', 'bonus', 'live'];\n\t\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\tctx: CanvasRenderingContext2D,\n\t\tcolor: string,\n\t)\n\t{\n\t\tthis.canvas = canvas;\n\t\tthis.ctx = ctx;\n\t\tthis.pos = {\n\t\t\tx: Math.floor(Math.random() * this.canvas.width),\n\t\t\ty: Math.floor(Math.random() * this.canvas.height),\n\t\t}\n\t\tthis.size = 26;\n\t\tthis.direction = Math.random() * Math.PI * 2;\n\t\tthis.speed = 1;\n\t\tthis.vel = {\n\t\t\tx: Math.random() * this.speed * (Math.random() < 0.5 ? 1 : -1),\n\t\t\ty: Math.random() * this.speed * (Math.random() < 0.5 ? 1 : -1),\n\t\t}\n\t\tthis.color = color;\n\t\tthis.sidesCount = 5;\n\t\tthis.rotation = 0;\n\t\tthis.rotationSpeed = Math.PI / 180;\n\t\tthis.radians = this.rotation * Math.PI / 180;\n\t\tthis.type = this.possibleTypes[Math.floor(Math.random() * this.possibleTypes.length)];\n\t\tthis.bonusPoints = this.type === 'bonus' ? '1000' : '+1up';\n\t}\n\t\n\tupdate() {\n\t\tthis.radians += this.rotationSpeed;\n\t\tthis.pos.x += this.vel.x;\n\t\tthis.pos.y += this.vel.y\n\t\t\n\t\tif (this.pos.x < 0) {\n\t\t\tthis.pos.x = this.canvas.width;\n\t\t} else if (this.pos.x > this.canvas.width) {\n\t\t\tthis.pos.x = 0;\n\t\t}\n\t\t\n\t\tif (this.pos.y < 0) {\n\t\t\tthis.pos.y = this.canvas.height;\n\t\t} else if (this.pos.y > this.canvas.height) {\n\t\t\tthis.pos.y = 0;\n\t\t}\n\t}\n\t\n\tdraw() {\n\t\tthis.ctx.translate(this.pos.x, this.pos.y);\n\t\tthis.ctx.rotate(this.radians);\n\t\tthis.ctx.fillStyle = this.color;\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.moveTo(\n\t\t\tthis.size / 2 * Math.cos(0),\n\t\t\tthis.size / 2 * Math.sin(0)\n\t\t);\n\t\tfor (let i = 0; i < this.sidesCount; i ++) {\n\t\t\tthis.ctx.lineTo(\n\t\t\t\tthis.size / 2 * Math.cos(i * 2 * Math.PI / this.sidesCount),\n\t\t\t\tthis.size / 2 * Math.sin(i * 2 * Math.PI / this.sidesCount)\n\t\t\t);\n\t\t}\n\t\tthis.ctx.fill();\n\t\tthis.ctx.closePath();\n\t\t\n\t\tthis.ctx.rotate(-this.radians);\n\t\tthis.ctx.translate(-this.pos.x, -this.pos.y);\n\t}\n}\n","import { GameState, KeysInterface, LevelInterface } from \"./types/types\";\nimport { Player } from \"./classes/Player.js\";\nimport { utils } from \"./utils/utils.js\";\nimport { Bullet } from \"./classes/Bullet.js\";\nimport { Infos } from \"./classes/Infos.js\";\nimport { Roid } from \"./classes/Roid.js\";\nimport { LEVELS } from \"./levels.js\";\nimport { areTwoElementsColliding } from \"./utils/collisionDetection.js\";\nimport { HitPoint } from \"./classes/HitPoint.js\";\nimport { PowerUp } from \"./classes/PowerUp.js\";\n\n// Get page elements\nconst canvas = document.querySelector('#canvas') as HTMLCanvasElement;\nconst ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\nconst START_SCREEN = document.querySelector('.start') as HTMLElement;\nconst INFOS_SCREEN = document.querySelector('.infos') as HTMLElement;\nconst END_SCREEN = document.querySelector('.end') as HTMLElement;\nconst LEVEL_START_SCREEN = document.querySelector('.level-start') as HTMLElement;\nconst LEVEL_START_TITLE = LEVEL_START_SCREEN.querySelector('.level-start__title') as HTMLHeadingElement;\n\n\n// Game animation variables\nconst FPS = 60;\nconst FRAME_DURATION = 1000 / FPS;\nlet prevTime = performance.now();\nlet accumulatedFrameTime = 0;\n\n// Colors and design\nconst COLORS = {\n\tBG: utils('--color-bg'),\n\tWHITE: utils('--color-white'),\n\tSHIP: 'hsl(20, 16%, 93%)',\n\tBULLET: 'hsl(291, 80%, 50%)',\n\tPOINTS: 'hsl(291, 60%, 75%)',\n\tPOWER_UP: 'hsl(187, 71%, 50%)',\n\tROIDS: [\n\t\t'hsl(53, 100%, 73%)',\n\t\t'hsl(45, 100%, 51%)',\n\t\t'hsl(14, 100%, 56%)',\n\t\t'hsl(1, 77%, 55%)',\n\t\t'hsl(0, 73%, 41%)',\n\t]\n};\n\n// Gameplay variables\nconst KEYS: KeysInterface = {\n\tLEFT: false,\n\tRIGHT: false,\n\tUP: false,\n\tSPACE: false,\n}\n\n// Game variables\nconst LEVEL_START_SCREEN_DURATION = 3000;\nconst STARTING_LIVES = 3;\nlet STARTING_LEVEL = 1;\nlet GAME_STATE: GameState = GameState.START;\nlet STARTING_SCORE = 0;\nconst ADD_POWERUP_THRESHOLD = 0.1;\n\nlet player: Player;\nlet infos: Infos;\nlet bullets: Bullet[] = [];\nlet roids: Roid[] = [];\nlet hitPoints: HitPoint[] = [];\nlet currentLevel: LevelInterface;\nlet powerUp: PowerUp | null = null;\n\nlet level = 1;\nlet score = 0;\nlet lives = STARTING_LIVES;\n\nfunction handleKeydown(event: KeyboardEvent) {\n\tif (GAME_STATE === GameState.GAME && event.code === 'Space' && player) {\n\t\tconst bulletPos = {\n\t\t\tx: player.pos.x + 4 / 3 * player.radius * Math.cos(player.direction),\n\t\t\ty: player.pos.y - 4 / 3 * player.radius * Math.sin(player.direction)\n\t\t}\n\t\tbullets.push(new Bullet(ctx, bulletPos, player.direction, level, COLORS.BULLET))\n\t}\n\t\n\tif (GAME_STATE === GameState.START && event.code === 'Space') {\n\t\tsetGameState(GameState.GAME);\n\t}\n\t\n\tif (GAME_STATE === GameState.GAME_OVER && event.code === 'Space') {\n\t\tsetGameState(GameState.GAME);\n\t\tinitGame();\n\t}\n\t\n\tif (GAME_STATE === GameState.GAME) {\n\t\tif (event.code === 'KeyA') {\n\t\t\tKEYS.LEFT = true;\n\t\t} else if (event.code === 'KeyD') {\n\t\t\tKEYS.RIGHT = true;\n\t\t} else if (event.code === 'KeyW') {\n\t\t\tKEYS.UP = true;\n\t\t}\n\t}\n}\n\nfunction handleKeyup(event: KeyboardEvent) {\n\tif (GAME_STATE === GameState.GAME) {\n\t\tif (event.code === 'KeyA') {\n\t\t\tKEYS.LEFT = false;\n\t\t} else if (event.code === 'KeyD') {\n\t\t\tKEYS.RIGHT = false;\n\t\t} else if (event.code === 'KeyW') {\n\t\t\tKEYS.UP = false;\n\t\t}\n\t}\n}\n\nfunction setGameState(newState: GameState) {\n\tGAME_STATE = newState;\n\tSTART_SCREEN.style.display = newState === GameState.START ? 'flex' : 'none';\n\tINFOS_SCREEN.style.display = newState === GameState.GAME ? 'flex' : 'none';\n\tEND_SCREEN.style.display = newState === GameState.GAME_OVER ? 'flex' : 'none';\n\tcanvas.style.display = newState === GameState.GAME ? 'block' : 'none';\n\t\n\tif (newState === GameState.GAME) {\n\t\tinitGame();\n\t}\n}\n\nfunction init() {\n\tcanvas.width = window.innerWidth;\n\tcanvas.height = window.innerHeight;\n\t\n\tsetGameState(GameState.START);\n\twindow.addEventListener('keydown', handleKeydown)\n\twindow.addEventListener('keyup', handleKeyup)\n}\n\nfunction initGame() {\n\tinfos = new Infos();\n\tscore = STARTING_SCORE;\n\tlives = STARTING_LIVES;\n\tlevel = STARTING_LEVEL\n\tinitLevel();\n}\n\nfunction initLevel() {\n\tLEVEL_START_TITLE.textContent = `LEVEL ${level}`;\n\tLEVEL_START_SCREEN.style.display = 'flex';\n\t\n\tsetTimeout(() => {\n\t\tLEVEL_START_SCREEN.style.display = 'none';\n\t\troids = [];\n\t\tbullets = [];\n\t\thitPoints = [];\n\t\tplayer = new Player(canvas, ctx, { x: canvas.width / 2, y: canvas.height / 2 }, COLORS.SHIP);\n\t\t\n\t\tcurrentLevel = LEVELS[level - 1];\n\t\tfor (let i = 0; i < currentLevel.numberOfRoids; i++) {\n\t\t\troids.push(new Roid(canvas, ctx, null, currentLevel.maxRoidGrade, currentLevel.maxRoidSpeed, COLORS.ROIDS, null));\n\t\t}\n\t\trequestAnimationFrame(gameloop);\n\t\t\n\t}, LEVEL_START_SCREEN_DURATION);\n}\n\nfunction gameloop(time: number) {\n\tctx.fillStyle = COLORS.BG;\n\tctx.fillRect(0,0,canvas.width, canvas.height);\n\t\n\tconst elapsedTimeBetweenFrames = time - prevTime;\n\tprevTime = time;\n\taccumulatedFrameTime += elapsedTimeBetweenFrames;\n\twhile (accumulatedFrameTime >= FRAME_DURATION) {\n\t\t// HERE UPDATE GAME ELEMENTS\n\t\t// update(frameDuration);\n\t\tplayer.update(KEYS);\n\t\t\n\t\tupdateBullets();\n\t\tcheckPlayerRoidsCollisions();\n\t\tcheckBulletsRoidsCollisions();\n\t\tfor (let roid of roids) {\n\t\t\troid.update();\n\t\t}\n\t\tupdatePoints();\n\t\tpowerUp && updatePowerUp();\n\t\t\n\t\taccumulatedFrameTime -= FRAME_DURATION;\n\t}\n\t\n\t// HERE RENDER GAME ELEMENTS\n\tif (GAME_STATE === GameState.GAME && roids.length) {\n\t\trenderGame();\n\t\trequestAnimationFrame(gameloop);\n\t}\n}\n\nfunction renderGame() {\n\tinfos.update(level, lives, score);\n\tplayer.draw();\n\tfor (let bullet of bullets) {\n\t\tbullet.draw();\n\t}\n\tfor (let roid of roids) {\n\t\troid.draw();\n\t}\n\tfor (let hitPoint of hitPoints) {\n\t\thitPoint.draw();\n\t}\n\tpowerUp && powerUp.draw();\n}\n\n/**\n * Update bullet array\n *  - if bullet is out of bounds, remove bullet\n *  - if bullet still visible update the position\n */\nfunction updateBullets() {\n\tif (bullets.length) {\n\t\tfor (let i = bullets.length; i > 0; i--) {\n\t\t\tconst bullet = bullets[i-1];\n\t\t\tif (bullet.pos.x > canvas.width || bullet.pos.x < 0\n\t\t\t\t|| bullet.pos.y > canvas.height || bullet.pos.y < 0) {\n\t\t\t\tbullets.splice(i - 1, 1);\n\t\t\t} else {\n\t\t\t\tbullet.update();\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Check if any roid was hit by a bullet\n */\nfunction checkBulletsRoidsCollisions(): void {\n\tfor (let i = bullets.length; i > 0; i--) {\n\t\tfor (let j = roids.length; j > 0; j--) {\n\t\t\tif (areTwoElementsColliding(bullets[i -1], roids[j - 1])) {\n\t\t\t\tconst roid = roids[j - 1];\n\t\t\t\tbullets.splice(i - 1, 1);\n\t\t\t\tif (roid.grade > 1) {\n\t\t\t\t\troids.push(new Roid(\n\t\t\t\t\t\tcanvas,\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\troid.grade - 1,\n\t\t\t\t\t\tcurrentLevel.maxRoidGrade,\n\t\t\t\t\t\tcurrentLevel.maxRoidSpeed,\n\t\t\t\t\t\tCOLORS.ROIDS,\n\t\t\t\t\t\t{x: roid.pos.x + 1, y: roid.pos.y + 1}\n\t\t\t\t\t));\n\t\t\t\t\troids.push(new Roid(\n\t\t\t\t\t\tcanvas,\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\troid.grade - 1,\n\t\t\t\t\t\tcurrentLevel.maxRoidGrade,\n\t\t\t\t\t\tcurrentLevel.maxRoidSpeed,\n\t\t\t\t\t\tCOLORS.ROIDS,\n\t\t\t\t\t\t{x: roid.pos.x - 1, y: roid.pos.y - 1}\n\t\t\t\t\t));\n\t\t\t\t}\n\t\t\t\thitPoints.push(new HitPoint(ctx, roid.pos, roid.points, COLORS.POINTS))\n\t\t\t\troids.splice(j - 1, 1);\n\t\t\t\tscore += roid.points;\n\t\t\t\t\n\t\t\t\tif (roids.length && !powerUp) {\n\t\t\t\t\taddPowerUp();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn checkBulletsRoidsCollisions();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tif (lives > 0 && !roids.length) {\n\t\tlevel++;\n\t\tinitLevel();\n\t}\n}\n\nfunction addPowerUp() {\n\tconst shouldAddPowerUp = Math.random() < ADD_POWERUP_THRESHOLD;\n\tif (shouldAddPowerUp) {\n\t\tpowerUp = new PowerUp(canvas, ctx, COLORS.POWER_UP);\n\t}\n}\n\nfunction updatePowerUp() {\n\tfor (let i = bullets.length; i > 0; i--) {\n\t\tif (bullets[i-1] && powerUp && areTwoElementsColliding(bullets[i -1], powerUp!)) {\n\t\t\tbullets.splice(i - 1, 1);\n\t\t\thitPoints.push(new HitPoint(ctx, powerUp!.pos, powerUp!.bonusPoints, COLORS.POWER_UP));\n\t\t\tif (powerUp!.type === 'bonus') {\n\t\t\t\tscore += +powerUp!.bonusPoints;\n\t\t\t} else if (powerUp!.type === 'live') {\n\t\t\t\tlives++;\n\t\t\t}\n\t\t\tpowerUp = null;\n\t\t}\n\t}\n\t\n\tpowerUp && powerUp.update();\n}\n\nfunction checkPlayerRoidsCollisions() {\n\tif (player.isInvencible) return;\n\t\n\tfor (let i = roids.length; i > 0; i--) {\n\t\tif (areTwoElementsColliding(player, roids[i - 1])) {\n\t\t\tshowPlayerHitCanvasBorder();\n\t\t\tplayer.startInvincibility();\n\t\t\tlives--;\n\t\t}\n\t}\n\t\n\tif (lives === 0) {\n\t\tsetGameState(GameState.GAME_OVER);\n\t}\n}\n\nfunction updatePoints() {\n\tfor (let i = hitPoints.length; i > 0; i--) {\n\t\tconst hitPoint = hitPoints[i - 1];\n\t\tif (hitPoint.opacity > 0) {\n\t\t\thitPoint.update(Date.now());\n\t\t} else {\n\t\t\thitPoints.splice(i - 1, 1);\n\t\t}\n\t}\n}\n\nfunction showPlayerHitCanvasBorder() {\n\tcanvas.classList.add('canvas--player-hit');\n\t\n\tcanvas.addEventListener('animationend', (event: AnimationEvent) => {\n\t\tif (event.animationName === 'canvasBorderAnimation') {\n\t\t\tcanvas.classList.remove('canvas--player-hit')\n\t\t}\n\t});\n}\n\ninit();\n"],"names":[],"mappings":"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"}