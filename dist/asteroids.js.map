{"version":3,"file":"asteroids.js","sources":["../src/types/types.ts","../src/classes/Player.ts","../src/utils/getCSSVariable.ts","../src/classes/Bullet.ts","../src/asteroids.ts"],"sourcesContent":["export enum GameState {\n\t'START' = 'START',\n\t'GAME' = 'GAME',\n\t'END' = 'END',\n}\n","import { KeysInterface, PositionInterface } from \"../types/types.js\";\n\nexport class Player {\n\tprivate canvas: HTMLCanvasElement;\n\tprivate ctx: CanvasRenderingContext2D;\n\tprivate size: number;\n\tprivate radius: number;\n\tprivate pos: PositionInterface;\n\tprivate vel: { x: number; y: number };\n\tprivate colors: { ship: string, thrusterInner: string, thrusterOuter: string }\n\tprivate direction: number;\n\tprivate rotationSpeed: number;\n\tprivate isThrusting: boolean;\n\tprivate thrustSpeed: number;\n\tprivate friction: number;\n\t\n\tconstructor(canvas: HTMLCanvasElement, ctx: CanvasRenderingContext2D, initialPosition: PositionInterface, color: string) {\n\t\tthis.canvas = canvas;\n\t\tthis.ctx = ctx;\n\t\tthis.size = 30;\n\t\tthis.radius = this.size / 2;\n\t\tthis.direction = 90 / 180 * Math.PI;\n\t\tthis.pos = {\n\t\t\tx: initialPosition.x,\n\t\t\ty: initialPosition.y\n\t\t}\n\t\tthis.vel = {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t};\n\t\tthis.colors = {\n\t\t\tship: color,\n\t\t\tthrusterInner: 'hsl(0, 74%, 50%)',\n\t\t\tthrusterOuter: 'hsl(41, 91%, 65%)'\n\t\t};\n\t\tthis.rotationSpeed = Math.PI / 50;\n\t\tthis.isThrusting = false;\n\t\tthis.thrustSpeed = .1;\n\t\tthis.friction = this.thrustSpeed / 10;\n\t}\n\t\n\tdraw() {\n\t\tif (this.isThrusting) {\n\t\t\tthis.drawThruster();\n\t\t}\n\t\tthis.drawShip();\n\t\t\n\t\t// centre dot (optional)\n\t\t// this.ctx.fillStyle = \"red\";\n\t\t//this.ctx.fillRect(this.pos.x - 1, this.pos.y - 1, 4, 4);\n\t}\n\t\n\tdrawShip() {\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.moveTo( // nose of the ship\n\t\t\tthis.pos.x + 4 / 3 * this.radius * Math.cos(this.direction),\n\t\t\tthis.pos.y - 4 / 3 * this.radius * Math.sin(this.direction)\n\t\t);\n\t\tthis.ctx.lineTo( // rear left\n\t\t\tthis.pos.x - this.radius * (2 / 3 * Math.cos(this.direction) + Math.sin(this.direction)),\n\t\t\tthis.pos.y + this.radius * (2 / 3 * Math.sin(this.direction) - Math.cos(this.direction))\n\t\t);\n\t\tthis.ctx.lineTo( // rear right\n\t\t\tthis.pos.x - this.radius * (2 / 3 * Math.cos(this.direction) - Math.sin(this.direction)),\n\t\t\tthis.pos.y + this.radius * (2 / 3 * Math.sin(this.direction) + Math.cos(this.direction))\n\t\t);\n\t\tthis.ctx.closePath();\n\t\tthis.ctx.fillStyle = this.colors.ship;\n\t\tthis.ctx.fill();\n\t}\n\t\n\tdrawThruster() {\n\t\tthis.ctx.fillStyle = this.colors.thrusterInner;\n\t\tthis.ctx.strokeStyle = this.colors.thrusterOuter;\n\t\tthis.ctx.lineWidth = this.size / 15;\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.moveTo( // rear left\n\t\t\tthis.pos.x - this.radius * (2 / 3 * Math.cos(this.direction) + 0.5 * Math.sin(this.direction)),\n\t\t\tthis.pos.y + this.radius * (2 / 3 * Math.sin(this.direction) - 0.5 * Math.cos(this.direction))\n\t\t);\n\t\tthis.ctx.lineTo( // rear centre (behind the ship)\n\t\t\tthis.pos.x - this.radius * 5 / 3 * Math.cos(this.direction),\n\t\t\tthis.pos.y + this.radius * 5 / 3 * Math.sin(this.direction)\n\t\t);\n\t\tthis.ctx.lineTo( // rear right\n\t\t\tthis.pos.x - this.radius * (2 / 3 * Math.cos(this.direction) - 0.5 * Math.sin(this.direction)),\n\t\t\tthis.pos.y + this.radius * (2 / 3 * Math.sin(this.direction) + 0.5 * Math.cos(this.direction))\n\t\t);\n\t\tthis.ctx.closePath();\n\t\tthis.ctx.fill();\n\t\tthis.ctx.stroke();\n\t}\n\t\n\tupdate(KEYS: KeysInterface) {\n\t\tif (KEYS.RIGHT) {\n\t\t\tthis.direction -= this.rotationSpeed;\n\t\t}\n\t\tif (KEYS.LEFT) {\n\t\t\tthis.direction += this.rotationSpeed;\n\t\t}\n\t\tthis.isThrusting = KEYS.UP;\n\t\t\n\t\t// Thrust or friction\n\t\tif (this.isThrusting) {\n\t\t\tthis.vel.x += this.thrustSpeed * Math.cos(this.direction);\n\t\t\tthis.vel.y -= this.thrustSpeed * Math.sin(this.direction);\n\t\t} else {\n\t\t\tif (this.vel.x > 0) {\n\t\t\t\tthis.vel.x -= this.friction;\n\t\t\t}\n\t\t\tif (this.vel.y > 0) {\n\t\t\t\tthis.vel.y += this.friction;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// update position\n\t\tthis.pos.x += this.vel.x;\n\t\tthis.pos.y += this.vel.y;\n\t\t\n\t\tif (this.pos.x < 0) {\n\t\t\tthis.pos.x = this.canvas.width;\n\t\t} else if (this.pos.x > this.canvas.width) {\n\t\t\tthis.pos.x = 0;\n\t\t}\n\t\t\n\t\tif (this.pos.y < 0) {\n\t\t\tthis.pos.y = this.canvas.height;\n\t\t} else if (this.pos.y > this.canvas.height) {\n\t\t\tthis.pos.y = 0;\n\t\t}\n\t}\n}\n","export function getCSSVariable(variableName: string): string {\n\treturn getComputedStyle(document.documentElement).getPropertyValue(variableName);\n}\n","import { PositionInterface } from \"../types/types.js\";\n\nexport class Bullet {\n\tprivate ctx: CanvasRenderingContext2D;\n\tpublic pos: PositionInterface;\n\tprivate direction: number;\n\tprivate grade: number;\n\tprivate color: string;\n\tprivate size: number;\n\tprivate vel: { x: number; y: number };\n\t\n\t\n\tconstructor(ctx: CanvasRenderingContext2D, pos: PositionInterface, direction: number, grade: number, color: string) {\n\t\tthis.ctx = ctx;\n\t\tthis.pos = pos;\n\t\tthis.direction = direction;\n\t\tthis.grade = grade;\n\t\tthis.color = color;\n\t\tthis.size = 3;\n\t\tthis.vel = {\n\t\t\tx: 5,\n\t\t\ty: 5,\n\t\t}\n\t\tconsole.log('aaa', this.direction);\n\t}\n\t\n\tdraw() {\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.arc(this.pos.x, this.pos.y, this.size, 0, 2 * Math.PI);\n\t\tthis.ctx.fillStyle = this.color;\n\t\tthis.ctx.fill();\n\t\tthis.ctx.closePath();\n\t}\n\t\n\tupdate() {\n\t\tthis.pos.x += this.vel.x * Math.cos(this.direction);\n\t\tthis.pos.y -= this.vel.y * Math.sin(this.direction);\n\t}\n}\n","import { GameState, KeysInterface } from \"./types/types\";\nimport { Player } from \"./classes/Player.js\";\nimport { getCSSVariable } from \"./utils/getCSSVariable\";\nimport { Bullet } from \"./classes/Bullet.js\";\n\nconst canvas = document.querySelector('#canvas') as HTMLCanvasElement;\nconst ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\nconst START_SCREEN = document.querySelector('.start') as HTMLElement;\n\nconst FPS = 60;\nconst FRAME_DURATION = 1000 / FPS;\nconst COLORS = {\n\tBG: getCSSVariable('--color-bg'),\n\tWHITE: getCSSVariable('--color-white'),\n\tBULLET: 'hsl(337, 100%, 65%)'\n};\nconst KEYS: KeysInterface = {\n\tLEFT: false,\n\tRIGHT: false,\n\tUP: false,\n\tSPACE: false,\n}\nlet GAME_STATE: GameState = GameState.START;\nlet player: Player;\n\nlet bullets: Bullet[] = [];\nlet level = 1;\n\nlet prevTime = performance.now();\nlet accumulatedFrameTime = 0;\n\nfunction handleKeydown(event: KeyboardEvent) {\n\tif (GAME_STATE === GameState.GAME && event.code === 'Space' && player) {\n\t\tconst bulletPos = {\n\t\t\tx: player.pos.x + 4 / 3 * player.radius * Math.cos(player.direction),\n\t\t\ty: player.pos.y - 4 / 3 * player.radius * Math.sin(player.direction)\n\t\t}\n\t\tbullets.push(new Bullet(ctx, bulletPos, player.direction, level, COLORS.BULLET))\n\t}\n\t\n\tif (GAME_STATE === GameState.START && event.code === 'Space') {\n\t\tsetGameState(GameState.GAME);\n\t}\n\t\n\tif (GAME_STATE === GameState.GAME) {\n\t\tconsole.log('e', event.code);\n\t\tif (event.code === 'KeyA') {\n\t\t\tKEYS.LEFT = true;\n\t\t} else if (event.code === 'KeyD') {\n\t\t\tKEYS.RIGHT = true;\n\t\t} else if (event.code === 'KeyW') {\n\t\t\tKEYS.UP = true;\n\t\t}\n\t}\n}\n\nfunction handleKeyup(event: KeyboardEvent) {\n\tif (GAME_STATE === GameState.GAME) {\n\t\tif (event.code === 'KeyA') {\n\t\t\tKEYS.LEFT = false;\n\t\t} else if (event.code === 'KeyD') {\n\t\t\tKEYS.RIGHT = false;\n\t\t} else if (event.code === 'KeyW') {\n\t\t\tKEYS.UP = false;\n\t\t}\n\t}\n}\n\nfunction setGameState(newState: GameState) {\n\tGAME_STATE = newState;\n\tSTART_SCREEN.style.display = newState === GameState.START ? 'flex' : 'none';\n\tcanvas.style.display = newState === GameState.GAME ? 'block' : 'none';\n\t\n\tif (newState === GameState.GAME) {\n\t\tinitGame();\n\t\trequestAnimationFrame(gameloop);\n\t}\n}\n\nfunction init() {\n\tcanvas.width = window.innerWidth;\n\tcanvas.height = window.innerHeight;\n\t\n\tsetGameState(GameState.START);\n\twindow.addEventListener('keydown', handleKeydown)\n\twindow.addEventListener('keyup', handleKeyup)\n}\n\nfunction initGame() {\n\tplayer = new Player(canvas, ctx, { x: canvas.width / 2, y: canvas.height / 2 }, COLORS.WHITE);\n}\n\nfunction gameloop(time: number) {\n\tctx.fillStyle = COLORS.BG;\n\tctx.fillRect(0,0,canvas.width, canvas.height);\n\t\n\tconst elapsedTimeBetweenFrames = time - prevTime;\n\tprevTime = time;\n\taccumulatedFrameTime += elapsedTimeBetweenFrames;\n\twhile (accumulatedFrameTime >= FRAME_DURATION) {\n\t\t// HERE UPDATE GAME ELEMENTS\n\t\t// update(frameDuration);\n\t\tplayer.update(KEYS)\n\t\tupdateBullets();\n\t\taccumulatedFrameTime -= FRAME_DURATION;\n\t}\n\t// HERE RENDER GAME ELEMENTS\n\t//render();\n\t\n\tif (GAME_STATE === GameState.START) {\n\t\t//renderStartScreen(ctx);\n\t\tconsole.log('start');\n\t} else if (GAME_STATE === GameState.GAME) {\n\t\trenderGame();\n\t} else if (GAME_STATE === GameState.END) {\n\t\tconsole.log('end');\n\t}\n\t\n\trequestAnimationFrame(gameloop);\n}\n\nfunction renderGame() {\n\tplayer.draw();\n\tfor (let bullet of bullets) {\n\t\tbullet.draw();\n\t}\n}\n\n/**\n * Update bullet array\n *  - if bullet is out of bounds, remove bullet\n *  - if bullet still visible update the position\n */\nfunction updateBullets() {\n\tif (bullets.length) {\n\t\tfor (let i = bullets.length; i > 0; i--) {\n\t\t\tconst bullet = bullets[i-1];\n\t\t\tif (bullet.pos.x > canvas.width || bullet.pos.x < 0\n\t\t\t\t|| bullet.pos.y > canvas.height || bullet.pos.y < 0) {\n\t\t\t\tbullets.splice(i-1, 1);\n\t\t\t} else {\n\t\t\t\tbullet.update();\n\t\t\t}\n\t\t}\n\t}\n}\n\ninit();\n"],"names":[],"mappings":"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"}