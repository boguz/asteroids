{"version":3,"file":"asteroids.js","sources":["../src/types/types.ts","../src/classes/Player.ts","../src/utils/utils.ts","../src/classes/Bullet.ts","../src/classes/Infos.ts","../src/classes/Roid.ts","../src/levels.ts","../src/utils/collisionDetection.ts","../src/classes/HitPoint.ts","../src/classes/PowerUp.ts","../src/utils/localStorage.ts","../src/classes/Star.ts","../src/asteroids.ts"],"sourcesContent":["export enum GameState {\n\t'START' = 'START',\n\t'GAME' = 'GAME',\n\t'GAME_OVER' = 'GAME_OVER',\n\t'WIN' = 'WIN',\n}\n\nexport interface PositionInterface {\n\tx: number;\n\ty: number;\n}\n\nexport interface KeysInterface {\n\tLEFT: boolean,\n\tRIGHT: boolean,\n\tUP: boolean,\n\tSPACE: boolean\n}\n\nexport interface LevelInterface {\n\tlevel: number,\n\tnumberOfRoids: number,\n\tmaxRoidGrade: number,\n\tmaxRoidSpeed: number,\n}\n\nexport type HiScoresInterface = [\n\tScoreInterface | null,\n\tScoreInterface | null,\n\tScoreInterface | null,\n];\n\nexport interface ScoreInterface {\n\tname: string,\n\tscore: number,\n}\n","import { KeysInterface, PositionInterface } from '../types/types.js';\n\n/**\n * Player / Ship\n */\nexport class Player {\n\tprivate canvas: HTMLCanvasElement;\n\tprivate ctx: CanvasRenderingContext2D;\n\tpublic size: number;\n\tpublic radius: number;\n\tpublic pos: PositionInterface;\n\tprivate vel: { x: number; y: number };\n\tprivate colors: { ship: string, thrusterInner: string, thrusterOuter: string };\n\tpublic direction: number;\n\tprivate readonly rotationSpeed: number;\n\tprivate isThrusting: boolean;\n\tprivate readonly thrustSpeed: number;\n\tprivate readonly friction: number;\n\tprivate invincible: boolean;\n\tprivate invincibleStart: number;\n\tprivate readonly invincibilityTime: number;\n\tprivate opacity: number;\n\tprivate readonly blinkTime: number;\n\t\n\t/**\n\t * Make player invisible and set starting time\n\t */\n\tpublic startInvincibility() {\n\t\tthis.invincible = true;\n\t\tthis.invincibleStart = Date.now();\n\t}\n\t\n\t/**\n\t * Get boolean telling the invisibility state\n\t */\n\tget isInvincible() {\n\t\treturn this.invincible;\n\t}\n\t\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\tctx: CanvasRenderingContext2D,\n\t\tinitialPosition: PositionInterface,\n\t\tcolor: string\n\t) {\n\t\tthis.canvas = canvas;\n\t\tthis.ctx = ctx;\n\t\tthis.size = 30;\n\t\tthis.radius = this.size / 2;\n\t\tthis.direction = 90 / 180 * Math.PI;\n\t\tthis.pos = {\n\t\t\tx: initialPosition.x,\n\t\t\ty: initialPosition.y\n\t\t};\n\t\tthis.vel = {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t};\n\t\tthis.colors = {\n\t\t\tship: color,\n\t\t\tthrusterInner: 'hsl(0, 74%, 50%)',\n\t\t\tthrusterOuter: 'hsl(41, 91%, 65%)'\n\t\t};\n\t\tthis.rotationSpeed = Math.PI / 50;\n\t\tthis.isThrusting = false;\n\t\tthis.thrustSpeed = .1;\n\t\tthis.friction = this.thrustSpeed / 12;\n\t\tthis.invincible = true;\n\t\tthis.invincibleStart = Date.now();\n\t\tthis.invincibilityTime = 3000;\n\t\tthis.opacity = 1;\n\t\tthis.blinkTime = 500;\n\t}\n\t\n\t/**\n\t * Draw player elements on the canvas\n\t */\n\tdraw() {\n\t\t// Draw thruster only of thrusting\n\t\tif (this.isThrusting) {\n\t\t\tthis.drawThruster();\n\t\t}\n\t\t\n\t\t// Draw ship\n\t\tthis.drawShip();\n\t\t\n\t\t// Blink during invincibility\n\t\tif (this.invincible) {\n\t\t\tconst delta = Date.now() - this.invincibleStart;\n\t\t\tthis.opacity = delta % this.blinkTime < (this.blinkTime / 2) ? 0.25 : 0.75;\n\t\t}\n\t}\n\t\n\t/**\n\t * Draw ship (triangle) on the canvas\n\t */\n\tdrawShip() {\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.globalAlpha = this.opacity;\n\t\t// nose of the ship\n\t\tthis.ctx.moveTo(\n\t\t\tthis.pos.x + 4 / 3 * this.radius * Math.cos(this.direction),\n\t\t\tthis.pos.y - 4 / 3 * this.radius * Math.sin(this.direction)\n\t\t);\n\t\t// rear left\n\t\tthis.ctx.lineTo(\n\t\t\tthis.pos.x - this.radius * (2 / 3 * Math.cos(this.direction) + Math.sin(this.direction)),\n\t\t\tthis.pos.y + this.radius * (2 / 3 * Math.sin(this.direction) - Math.cos(this.direction))\n\t\t);\n\t\t// rear right\n\t\tthis.ctx.lineTo(\n\t\t\tthis.pos.x - this.radius * (2 / 3 * Math.cos(this.direction) - Math.sin(this.direction)),\n\t\t\tthis.pos.y + this.radius * (2 / 3 * Math.sin(this.direction) + Math.cos(this.direction))\n\t\t);\n\t\tthis.ctx.closePath();\n\t\tthis.ctx.fillStyle = this.colors.ship;\n\t\tthis.ctx.fill();\n\t\tthis.ctx.globalAlpha = 1;\n\t}\n\t\n\t/**\n\t * Draw ship's thruster\n\t */\n\tdrawThruster() {\n\t\tthis.ctx.globalAlpha = this.opacity;\n\t\tthis.ctx.fillStyle = this.colors.thrusterInner;\n\t\tthis.ctx.strokeStyle = this.colors.thrusterOuter;\n\t\tthis.ctx.lineWidth = this.size / 15;\n\t\tthis.ctx.beginPath();\n\t\t// rear left\n\t\tthis.ctx.moveTo(\n\t\t\tthis.pos.x - this.radius * (2 / 3 * Math.cos(this.direction) + 0.5 * Math.sin(this.direction)),\n\t\t\tthis.pos.y + this.radius * (2 / 3 * Math.sin(this.direction) - 0.5 * Math.cos(this.direction))\n\t\t);\n\t\t// rear centre (behind the ship)\n\t\tthis.ctx.lineTo(\n\t\t\tthis.pos.x - this.radius * 5 / 3 * Math.cos(this.direction),\n\t\t\tthis.pos.y + this.radius * 5 / 3 * Math.sin(this.direction)\n\t\t);\n\t\t// rear right\n\t\tthis.ctx.lineTo(\n\t\t\tthis.pos.x - this.radius * (2 / 3 * Math.cos(this.direction) - 0.5 * Math.sin(this.direction)),\n\t\t\tthis.pos.y + this.radius * (2 / 3 * Math.sin(this.direction) + 0.5 * Math.cos(this.direction))\n\t\t);\n\t\tthis.ctx.closePath();\n\t\tthis.ctx.fill();\n\t\tthis.ctx.stroke();\n\t\tthis.ctx.globalAlpha = 1;\n\t}\n\t\n\t/**\n\t * Update ship position, rotation, speed and invincibility state\n\t * Listen to pressed keys to update corresponding values\n\t *\n\t * @param KEYS\n\t */\n\tupdate(KEYS: KeysInterface) {\n\t\tif (KEYS.RIGHT) {\n\t\t\tthis.direction -= this.rotationSpeed;\n\t\t}\n\t\tif (KEYS.LEFT) {\n\t\t\tthis.direction += this.rotationSpeed;\n\t\t}\n\t\tthis.isThrusting = KEYS.UP;\n\t\t\n\t\t// Thrust or friction\n\t\tif (this.isThrusting) {\n\t\t\tthis.vel.x += this.thrustSpeed * Math.cos(this.direction);\n\t\t\tthis.vel.y -= this.thrustSpeed * Math.sin(this.direction);\n\t\t} else {\n\t\t\tif (this.vel.x > 0) {\n\t\t\t\tthis.vel.x -= this.friction;\n\t\t\t} else if (this.vel.x < 0) {\n\t\t\t\tthis.vel.x += this.friction;\n\t\t\t}\n\t\t\tif (this.vel.y > 0) {\n\t\t\t\tthis.vel.y -= this.friction;\n\t\t\t} else if (this.vel.y < 0) {\n\t\t\t\tthis.vel.y += this.friction;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// update position\n\t\tthis.pos.x += this.vel.x;\n\t\tthis.pos.y += this.vel.y;\n\t\t\n\t\tif (this.pos.x < 0) {\n\t\t\tthis.pos.x = this.canvas.width;\n\t\t} else if (this.pos.x > this.canvas.width) {\n\t\t\tthis.pos.x = 0;\n\t\t}\n\t\t\n\t\tif (this.pos.y < 0) {\n\t\t\tthis.pos.y = this.canvas.height;\n\t\t} else if (this.pos.y > this.canvas.height) {\n\t\t\tthis.pos.y = 0;\n\t\t}\n\t\t\n\t\t// Check invincibility state\n\t\tconst timeNow = Date.now();\n\t\tif (timeNow - this.invincibleStart > this.invincibilityTime) {\n\t\t\tthis.invincible = false;\n\t\t\tthis.opacity = 1;\n\t\t}\n\t}\n}\n","/**\n * Get value of a CSS Variable\n *\n * @param variableName\n */\nexport function getCSSVariableValue(variableName: string): string {\n\treturn getComputedStyle(document.documentElement).getPropertyValue(variableName);\n}\n\n/**\n * Return a random number from a given interval, max and min included\n *\n * @param min\n * @param max\n */\nexport function randomIntFromInterval(min: number, max: number): number {\n\treturn Math.floor(Math.random() * (max - min + 1) + min);\n}\n","import { PositionInterface } from '../types/types.js';\n\n/**\n * Bullet fired by the ship\n */\nexport class Bullet {\n\tprivate ctx: CanvasRenderingContext2D;\n\tpublic pos: PositionInterface;\n\tprivate readonly direction: number;\n\tprivate grade: number;\n\tprivate color: string;\n\tpublic size: number;\n\tprivate vel: { x: number; y: number };\n\t\n\tconstructor(\n\t\tctx: CanvasRenderingContext2D,\n\t\tpos: PositionInterface,\n\t\tdirection: number,\n\t\tgrade: number,\n\t\tcolor: string\n\t) {\n\t\tthis.ctx = ctx;\n\t\tthis.pos = pos;\n\t\tthis.direction = direction;\n\t\tthis.grade = grade;\n\t\tthis.color = color;\n\t\tthis.size = 3;\n\t\tthis.vel = {\n\t\t\tx: 5,\n\t\t\ty: 5,\n\t\t};\n\t}\n\t\n\t/**\n\t * Draw a button on the canvas\n\t */\n\tdraw() {\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.arc(this.pos.x, this.pos.y, this.size, 0, 2 * Math.PI);\n\t\tthis.ctx.fillStyle = this.color;\n\t\tthis.ctx.fill();\n\t\tthis.ctx.closePath();\n\t}\n\t\n\t/**\n\t * Update bullet's position\n\t */\n\tupdate() {\n\t\tthis.pos.x += this.vel.x * Math.cos(this.direction);\n\t\tthis.pos.y -= this.vel.y * Math.sin(this.direction);\n\t}\n}\n","/**\n * Show game information on the top of the screen\n *  - Level, lives and score\n */\nexport class Infos {\n\tprivate levelEl: HTMLParagraphElement;\n\tprivate livesEl: HTMLParagraphElement;\n\tprivate scoreEl: HTMLParagraphElement;\n\tprivate readonly levelsAmount: number;\n\t\n\tconstructor(levelsAmount: number) {\n\t\tthis.levelEl = document.querySelector('.infos_level')!;\n\t\tthis.livesEl = document.querySelector('.infos_lives')!;\n\t\tthis.scoreEl = document.querySelector('.infos_score')!;\n\t\tthis.levelsAmount = levelsAmount;\n\t}\n\t\n\t/**\n\t * Update the content of the information elements on the canvas\n\t *\n\t * @param level\n\t * @param lives\n\t * @param score\n\t */\n\tupdate(level: number, lives: number, score: number) {\n\t\tthis.levelEl.textContent = `Level:${level}/${this.levelsAmount}`;\n\t\tthis.livesEl.textContent = `Lives:${lives}`;\n\t\tthis.scoreEl.textContent = `Score:${score}`;\n\t}\n}\n","import { PositionInterface } from '../types/types.js';\nimport { randomIntFromInterval } from '../utils/utils.js';\n\n/**\n * Asteroid element (show as a circle)\n */\nexport class Roid {\n\tprivate canvas: HTMLCanvasElement;\n\tprivate ctx: CanvasRenderingContext2D;\n\tpublic pos: PositionInterface;\n\tpublic grade: number;\n\tpublic size: number;\n\tprivate direction: number;\n\tprivate vel: { x: number, y: number };\n\tprivate readonly speed: number;\n\tprivate readonly color: string;\n\tpublic points: number;\n\t\n\tprivate sizes = [20, 30, 40, 50, 60];\n\tprivate possiblePoints = [400, 300, 200, 100, 50];\n\t\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\tctx: CanvasRenderingContext2D,\n\t\tgrade: number | null,\n\t\tmaxRoidGrade: number,\n\t\tmaxRoidSpeed: number,\n\t\tpossibleColors: string[],\n\t\tstartPos: PositionInterface | null\n\t) {\n\t\tthis.canvas = canvas;\n\t\tthis.ctx = ctx;\n\t\tthis.pos = startPos\n\t\t\t? startPos\n\t\t\t: {\n\t\t\t\tx: Math.floor(Math.random() * this.canvas.width),\n\t\t\t\ty: Math.floor(Math.random() * this.canvas.height),\n\t\t\t};\n\t\tthis.grade = grade ? grade : randomIntFromInterval(1, maxRoidGrade);\n\t\tthis.size = this.sizes[this.grade - 1];\n\t\tthis.direction = Math.random() * Math.PI * 2;\n\t\tthis.speed = randomIntFromInterval(1.5, maxRoidSpeed);\n\t\tthis.vel = {\n\t\t\tx: Math.random() * this.speed * (Math.random() < 0.5 ? 1 : -1),\n\t\t\ty: Math.random() * this.speed * (Math.random() < 0.5 ? 1 : -1),\n\t\t};\n\t\tthis.color = possibleColors[this.grade - 1];\n\t\tthis.points = this.possiblePoints[this.grade - 1];\n\t}\n\t\n\t/**\n\t * Draw asteroid on the canvas\n\t */\n\tdraw() {\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.arc(this.pos.x, this.pos.y, this.size, 0, 2 * Math.PI);\n\t\tthis.ctx.fillStyle = this.color;\n\t\tthis.ctx.fill();\n\t\tthis.ctx.closePath();\n\t}\n\t\n\t/**\n\t * Update asteroid's position\n\t */\n\tupdate() {\n\t\tthis.pos.x += this.vel.x;\n\t\tthis.pos.y += this.vel.y;\n\t\t\n\t\tif (this.pos.x < 0) {\n\t\t\tthis.pos.x = this.canvas.width;\n\t\t} else if (this.pos.x > this.canvas.width) {\n\t\t\tthis.pos.x = 0;\n\t\t}\n\t\t\n\t\tif (this.pos.y < 0) {\n\t\t\tthis.pos.y = this.canvas.height;\n\t\t} else if (this.pos.y > this.canvas.height) {\n\t\t\tthis.pos.y = 0;\n\t\t}\n\t}\n}\n","import { LevelInterface } from './types/types.js';\n\n/**\n * Game levels\n */\nexport const LEVELS: LevelInterface[] = [\n\t{\n\t\tlevel: 1,\n\t\tnumberOfRoids: 4,\n\t\tmaxRoidGrade: 3,\n\t\tmaxRoidSpeed: 2\n\t},\n\t{\n\t\tlevel: 2,\n\t\tnumberOfRoids: 4,\n\t\tmaxRoidGrade: 3,\n\t\tmaxRoidSpeed: 3\n\t},\n\t{\n\t\tlevel: 3,\n\t\tnumberOfRoids: 5,\n\t\tmaxRoidGrade: 4,\n\t\tmaxRoidSpeed: 3.5\n\t},\n\t{\n\t\tlevel: 4,\n\t\tnumberOfRoids: 5,\n\t\tmaxRoidGrade: 4,\n\t\tmaxRoidSpeed: 4\n\t},\n\t{\n\t\tlevel: 5,\n\t\tnumberOfRoids: 6,\n\t\tmaxRoidGrade: 4,\n\t\tmaxRoidSpeed: 4\n\t},\n\t{\n\t\tlevel: 6,\n\t\tnumberOfRoids: 6,\n\t\tmaxRoidGrade: 4,\n\t\tmaxRoidSpeed: 4\n\t},\n\t{\n\t\tlevel: 7,\n\t\tnumberOfRoids: 7,\n\t\tmaxRoidGrade: 4,\n\t\tmaxRoidSpeed: 4\n\t},\n\t{\n\t\tlevel: 8,\n\t\tnumberOfRoids: 8,\n\t\tmaxRoidGrade: 5,\n\t\tmaxRoidSpeed: 4\n\t},\n\t{\n\t\tlevel: 9,\n\t\tnumberOfRoids: 9,\n\t\tmaxRoidGrade: 5,\n\t\tmaxRoidSpeed: 5\n\t},\n\t{\n\t\tlevel: 10,\n\t\tnumberOfRoids: 10,\n\t\tmaxRoidGrade: 5,\n\t\tmaxRoidSpeed: 5\n\t},\n\t{\n\t\tlevel: 11,\n\t\tnumberOfRoids: 11,\n\t\tmaxRoidGrade: 5,\n\t\tmaxRoidSpeed: 5\n\t},\n\t{\n\t\tlevel: 12,\n\t\tnumberOfRoids: 12,\n\t\tmaxRoidGrade: 5,\n\t\tmaxRoidSpeed: 5\n\t},\n\t{\n\t\tlevel: 13,\n\t\tnumberOfRoids: 14,\n\t\tmaxRoidGrade: 5,\n\t\tmaxRoidSpeed: 5\n\t},\n\t{\n\t\tlevel: 14,\n\t\tnumberOfRoids: 17,\n\t\tmaxRoidGrade: 5,\n\t\tmaxRoidSpeed: 5\n\t},\n\t{\n\t\tlevel: 15,\n\t\tnumberOfRoids: 20,\n\t\tmaxRoidGrade: 5,\n\t\tmaxRoidSpeed: 5\n\t}\n];\n","import { Bullet } from '../classes/Bullet.js';\nimport { Roid } from '../classes/Roid.js';\nimport { Player } from '../classes/Player.js';\nimport { PowerUp } from '../classes/PowerUp.js';\n\n/**\n * Detect collision between two elements.\n *\n * @param elOne\n * @param elTwo\n */\nexport function areTwoElementsColliding(elOne: Bullet | Player, elTwo: Roid | PowerUp): boolean {\n\tconst sideA = elOne.pos.x - elTwo.pos.x;\n\tconst sideB = elOne.pos.y - elTwo.pos.y;\n\tconst distance = Math.sqrt(sideA * sideA + sideB * sideB);\n\treturn distance <= (elOne.size + elTwo.size);\n}\n","import { PositionInterface } from '../types/types.js';\n\n/**\n * Info shown when a roid or power up is hit by a bullet\n */\nexport class HitPoint {\n\tprivate ctx: CanvasRenderingContext2D;\n\tprivate pos: PositionInterface;\n\tprivate readonly points: number | string;\n\tprivate ANIMATION_DURATION: number;\n\tprivate startTime: number;\n\tpublic opacity: number;\n\tprivate readonly color: string;\n\t\n\tconstructor(\n\t\tctx: CanvasRenderingContext2D,\n\t\tpos: PositionInterface,\n\t\tpoints: number | string,\n\t\tcolor: string,\n\t) {\n\t\tthis.ctx = ctx;\n\t\tthis.pos = pos;\n\t\tthis.points = points;\n\t\tthis.ANIMATION_DURATION = 3000;\n\t\tthis.startTime = Date.now();\n\t\tthis.opacity = 1;\n\t\tthis.color = color;\n\t}\n\t\n\t/**\n\t * Draw the hit information on the canvas\n\t */\n\tdraw() {\n\t\tthis.ctx.globalAlpha = this.opacity;\n\t\tthis.ctx.fillStyle = this.color;\n\t\tthis.ctx.font = '20px sans-serif';\n\t\tthis.ctx.textAlign = 'center';\n\t\tthis.ctx.fillText(`${this.points}`,this.pos.x,this.pos.y);\n\t\tthis.ctx.globalAlpha = 1;\n\t}\n\t\n\t/**\n\t * Update the hit information's position and opacity\n\t */\n\tupdate() {\n\t\tthis.pos.y -= 1.5;\n\t\tthis.opacity -= .025;\n\t\tif (this.opacity <= 0.1) {\n\t\t\tthis.opacity = 0;\n\t\t}\n\t}\n}\n","import { PositionInterface } from '../types/types.js';\n\n/**\n * Power up with bonus points or extra live.\n * Displayed as a slowly rotating pentagon that disappears after 5 seconds\n */\nexport class PowerUp {\n\tprivate canvas: HTMLCanvasElement;\n\tprivate ctx: CanvasRenderingContext2D;\n\tpublic pos: PositionInterface;\n\tpublic size: number;\n\tprivate direction: number;\n\tprivate vel: { x: number, y: number };\n\tprivate readonly speed: number;\n\tprivate readonly color: string;\n\tprivate readonly sidesCount: number;\n\tprivate readonly rotation: number;\n\tprivate readonly rotationSpeed: number;\n\tprivate radians: number;\n\tpublic type: string;\n\tpublic bonusPoints: string;\n\tprivate readonly creationTime: number;\n\tprivate readonly duration: number;\n\tpublic opacity: number;\n\tprivate readonly fadeSpeed: number;\n\t\n\tprivate possibleTypes = ['bonus', 'bonus', 'bonus', 'bonus', 'bonus', 'bonus', 'bonus', 'bonus', 'bonus', 'live'];\n\t\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\tctx: CanvasRenderingContext2D,\n\t\tcolor: string,\n\t)\n\t{\n\t\tthis.canvas = canvas;\n\t\tthis.ctx = ctx;\n\t\tthis.pos = {\n\t\t\tx: Math.floor(Math.random() * this.canvas.width),\n\t\t\ty: Math.floor(Math.random() * this.canvas.height),\n\t\t};\n\t\tthis.size = 26;\n\t\tthis.direction = Math.random() * Math.PI * 2;\n\t\tthis.speed = 1;\n\t\tthis.vel = {\n\t\t\tx: Math.random() * this.speed * (Math.random() < 0.5 ? 1 : -1),\n\t\t\ty: Math.random() * this.speed * (Math.random() < 0.5 ? 1 : -1),\n\t\t};\n\t\tthis.color = color;\n\t\tthis.sidesCount = 5;\n\t\tthis.rotation = 0;\n\t\tthis.rotationSpeed = Math.PI / 180;\n\t\tthis.radians = this.rotation * Math.PI / 180;\n\t\tthis.type = this.possibleTypes[Math.floor(Math.random() * this.possibleTypes.length)];\n\t\tthis.bonusPoints = this.type === 'bonus' ? '1000' : '+1up';\n\t\tthis.creationTime = Date.now();\n\t\tthis.duration = 8000;\n\t\tthis.opacity = 1;\n\t\tthis.fadeSpeed = 0.01;\n\t}\n\t\n\t/**\n\t * Draw power up pentagon on the canvas\n\t */\n\tdraw() {\n\t\tthis.ctx.globalAlpha = this.opacity;\n\t\tthis.ctx.translate(this.pos.x, this.pos.y);\n\t\tthis.ctx.rotate(this.radians);\n\t\tthis.ctx.fillStyle = this.color;\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.moveTo(\n\t\t\tthis.size / 2 * Math.cos(0),\n\t\t\tthis.size / 2 * Math.sin(0)\n\t\t);\n\t\tfor (let i = 0; i < this.sidesCount; i ++) {\n\t\t\tthis.ctx.lineTo(\n\t\t\t\tthis.size / 2 * Math.cos(i * 2 * Math.PI / this.sidesCount),\n\t\t\t\tthis.size / 2 * Math.sin(i * 2 * Math.PI / this.sidesCount)\n\t\t\t);\n\t\t}\n\t\tthis.ctx.fill();\n\t\tthis.ctx.closePath();\n\t\t\n\t\tthis.ctx.rotate(-this.radians);\n\t\tthis.ctx.translate(-this.pos.x, -this.pos.y);\n\t\tthis.ctx.globalAlpha = 1;\n\t}\n\t\n\t/**\n\t * Update power up's opacity, rotation and position\n\t */\n\tupdate() {\n\t\tif (Date.now() - this.creationTime > this.duration && this.opacity > 0) {\n\t\t\tthis.opacity -= this.fadeSpeed;\n\t\t\t\n\t\t\tif (this.opacity <= 0.05) {\n\t\t\t\tthis.opacity = 0;\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.radians += this.rotationSpeed;\n\t\tthis.pos.x += this.vel.x;\n\t\tthis.pos.y += this.vel.y;\n\t\t\n\t\tif (this.pos.x < 0) {\n\t\t\tthis.pos.x = this.canvas.width;\n\t\t} else if (this.pos.x > this.canvas.width) {\n\t\t\tthis.pos.x = 0;\n\t\t}\n\t\t\n\t\tif (this.pos.y < 0) {\n\t\t\tthis.pos.y = this.canvas.height;\n\t\t} else if (this.pos.y > this.canvas.height) {\n\t\t\tthis.pos.y = 0;\n\t\t}\n\t}\n}\n","import { HiScoresInterface } from '../types/types';\n\n/**\n * Save the current hi-scores to the local storage\n *\n * @param storeName\n * @param score\n */\nexport function saveScore(storeName: string, score: HiScoresInterface) {\n\tlocalStorage.setItem(storeName, JSON.stringify(score));\n}\n\n/**\n * Get the saved hi-scores from local storage\n *\n * @param storeName\n */\nexport function getScore(storeName: string): HiScoresInterface {\n\tconst score = localStorage.getItem(storeName);\n\treturn score ? JSON.parse(score) : [null, null, null];\n}\n","import { PositionInterface } from '../types/types';\nimport { randomIntFromInterval } from '../utils/utils';\n\n/**\n * Background star element\n */\nexport class Star {\n\tprivate canvas: HTMLCanvasElement;\n\tprivate ctx: CanvasRenderingContext2D;\n\tprivate readonly color: string;\n\tprivate pos: PositionInterface;\n\tprivate readonly size: number;\n\t\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\tctx: CanvasRenderingContext2D,\n\t\tcolor: string\n\t) {\n\t\tthis.canvas = canvas;\n\t\tthis.ctx = ctx;\n\t\tthis.color = color;\n\t\tthis.pos = {\n\t\t\tx: Math.random() * this.canvas.width,\n\t\t\ty: Math.random() * this.canvas.height,\n\t\t};\n\t\tthis.size = randomIntFromInterval(1, 2);\n\t}\n\t\n\t/**\n\t * Draw a star on the canvas\n\t */\n\tdraw() {\n\t\tthis.ctx.globalAlpha = .5;\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.arc(this.pos.x, this.pos.y, this.size, 0, 2 * Math.PI);\n\t\tthis.ctx.fillStyle = this.color;\n\t\tthis.ctx.fill();\n\t\tthis.ctx.closePath();\n\t\tthis.ctx.globalAlpha = 1;\n\t}\n}\n","import { GameState, KeysInterface, LevelInterface } from './types/types';\nimport { Player } from './classes/Player.js';\nimport { getCSSVariableValue } from './utils/utils.js';\nimport { Bullet } from './classes/Bullet.js';\nimport { Infos } from './classes/Infos.js';\nimport { Roid } from './classes/Roid.js';\nimport { LEVELS } from './levels.js';\nimport { areTwoElementsColliding } from './utils/collisionDetection.js';\nimport { HitPoint } from './classes/HitPoint.js';\nimport { PowerUp } from './classes/PowerUp.js';\nimport { getScore, saveScore } from './utils/localStorage.js';\nimport { Star } from './classes/Star.js';\n\n// Get page elements\nconst canvas = document.querySelector('#canvas') as HTMLCanvasElement;\nconst ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\nconst START_SCREEN = document.querySelector('.start') as HTMLElement;\nconst INFOS_SCREEN = document.querySelector('.infos') as HTMLElement;\nconst END_SCREEN = document.querySelector('.end') as HTMLElement;\nconst END_SCREEN_TITLE = END_SCREEN.querySelector('.end__title') as HTMLHeadingElement;\nconst LEVEL_START_SCREEN = document.querySelector('.level-start') as HTMLElement;\nconst LEVEL_START_TITLE = LEVEL_START_SCREEN.querySelector('.level-start__title') as HTMLHeadingElement;\nconst HISCORE_EL_ONE = document.querySelector('.hiscore--one') as HTMLParagraphElement;\nconst HISCORE_EL_TWO = document.querySelector('.hiscore--two') as HTMLParagraphElement;\nconst HISCORE_EL_THREE = document.querySelector('.hiscore--three') as HTMLParagraphElement;\nconst HISCORE_ELEMENTS = [HISCORE_EL_ONE, HISCORE_EL_TWO, HISCORE_EL_THREE];\n\n// Mediaqueries\nconst MIN_WIDTH = 1200;\nconst MATCH_MEDIA = window.matchMedia(`(min-width: ${MIN_WIDTH}px)`);\nlet isDesktop = window.matchMedia(`(min-width: ${MIN_WIDTH}px)`).matches;\nMATCH_MEDIA.addListener(event => {\n\tisDesktop = event.matches;\n\tif (isDesktop && GAME_STATE === GameState.START) {\n\t\tinit();\n\t} else if (!isDesktop) {\n\t\tsetGameState(GameState.START);\n\t}\n});\n\n// Game animation variables\nconst FPS = 60;\nconst FRAME_DURATION = 1000 / FPS;\nlet prevTime = performance.now();\nlet accumulatedFrameTime = 0;\n\n// Colors and design\nconst COLORS = {\n\tBG: getCSSVariableValue('--color-bg'),\n\tWHITE: getCSSVariableValue('--color-white'),\n\tSHIP: 'hsl(20, 16%, 93%)',\n\tBULLET: 'hsl(291, 80%, 50%)',\n\tPOINTS: 'hsl(291, 60%, 75%)',\n\tPOWER_UP: 'hsl(187, 71%, 50%)',\n\tSTAR: 'hsl(55, 100%, 95%)',\n\tROIDS: [\n\t\t'hsl(47, 100%, 75%)',\n\t\t'hsl(40, 100%, 51%)',\n\t\t'hsl(14, 80%, 52%)',\n\t\t'hsl(1, 71%, 48%)',\n\t\t'hsl(0, 73%, 32%)',\n\t]\n};\n\n// Gameplay variables\nlet KEYS: KeysInterface = {\n\tLEFT: false,\n\tRIGHT: false,\n\tUP: false,\n\tSPACE: false,\n};\n\n// Game variables\nconst LEVEL_START_SCREEN_DURATION = 2000;\nconst STARTING_LIVES = 3;\nconst STARTING_LEVEL = 1;\nconst STARTING_SCORE = 0;\nconst ADD_POWERUP_PROBABILITY = 0.05;\nconst STORE_NAME = 'AsteroidsScore';\nconst AMOUNT_OF_HIGHSCORES = 3;\nconst BULLETS_MAX = 8;\nconst NUM_OF_STARS = 20;\n\nlet GAME_STATE: GameState = GameState.START;\nlet player: Player;\nlet infos: Infos;\nlet bullets: Bullet[] = [];\nlet roids: Roid[] = [];\nlet hitPoints: HitPoint[] = [];\nlet stars: Star[];\nlet currentLevel: LevelInterface;\nlet powerUp: PowerUp | null = null;\n\n// Initial  game values\nlet level = 1;\nlet score = 0;\nlet lives = STARTING_LIVES;\n\n/**\n * Handle key down events correctly according to game state\n *\n * @param event\n */\nfunction handleKeydown(event: KeyboardEvent) {\n\t// Shoot\n\tif (GAME_STATE === GameState.GAME && event.code === 'Space' && player) {\n\t\tconst bulletPos = {\n\t\t\tx: player.pos.x + 4 / 3 * player.radius * Math.cos(player.direction),\n\t\t\ty: player.pos.y - 4 / 3 * player.radius * Math.sin(player.direction)\n\t\t};\n\t\tif (bullets.length < BULLETS_MAX) {\n\t\t\tbullets.push(new Bullet(ctx, bulletPos, player.direction, level, COLORS.BULLET));\n\t\t}\n\t}\n\t\n\t// Start game from Start Screen\n\tif (GAME_STATE === GameState.START && event.code === 'Space') {\n\t\tsetGameState(GameState.GAME);\n\t}\n\t\n\t// Restart game from End or Win screens\n\tif (GAME_STATE === GameState.GAME_OVER && event.code === 'Space' ||\n\t\tGAME_STATE === GameState.WIN && event.code === 'Space') {\n\t\tsetGameState(GameState.GAME);\n\t\tinitGame();\n\t}\n\t\n\t// Set correct pressed key values\n\tif (GAME_STATE === GameState.GAME) {\n\t\tif (event.code === 'KeyA') {\n\t\t\tKEYS.LEFT = true;\n\t\t} else if (event.code === 'KeyD') {\n\t\t\tKEYS.RIGHT = true;\n\t\t} else if (event.code === 'KeyW') {\n\t\t\tKEYS.UP = true;\n\t\t}\n\t}\n}\n\n/**\n * Set key pressed values to false on key up event\n *\n * @param event\n */\nfunction handleKeyup(event: KeyboardEvent) {\n\tif (GAME_STATE === GameState.GAME) {\n\t\tif (event.code === 'KeyA') {\n\t\t\tKEYS.LEFT = false;\n\t\t} else if (event.code === 'KeyD') {\n\t\t\tKEYS.RIGHT = false;\n\t\t} else if (event.code === 'KeyW') {\n\t\t\tKEYS.UP = false;\n\t\t}\n\t}\n}\n\n/**\n * Change game state\n *  - set correct GAME_STATE\n *  - show / hide correct screen for current state\n *  - handle new game and win / game over states\n *\n * @param newState\n */\nfunction setGameState(newState: GameState) {\n\tGAME_STATE = newState;\n\tSTART_SCREEN.style.display = newState === GameState.START ? 'flex' : 'none';\n\tINFOS_SCREEN.style.display = newState === GameState.GAME ? 'flex' : 'none';\n\tEND_SCREEN.style.display = newState === GameState.GAME_OVER || newState === GameState.WIN ? 'flex' : 'none';\n\tcanvas.style.display = newState === GameState.GAME ? 'block' : 'none';\n\t\n\tif (GAME_STATE === GameState.GAME) {\n\t\tinitGame();\n\t} else if (GAME_STATE === GameState.WIN || GAME_STATE === GameState.GAME_OVER) {\n\t\tEND_SCREEN_TITLE.textContent = GAME_STATE === GameState.GAME_OVER ? 'GAME OVER' : 'YOU WIN';\n\t\tupdateSavedScore();\n\t}\n}\n\n/**\n * Initialize app\n */\nfunction init() {\n\tcanvas.width = window.innerWidth;\n\tcanvas.height = window.innerHeight;\n\t\n\tsetGameState(GameState.START);\n\twindow.addEventListener('keydown', handleKeydown);\n\twindow.addEventListener('keyup', handleKeyup);\n}\n\n/**\n * Initialize game\n */\nfunction initGame() {\n\tinfos = new Infos(LEVELS.length);\n\tscore = STARTING_SCORE;\n\tlives = STARTING_LIVES;\n\tlevel = STARTING_LEVEL;\n\tinitLevel();\n}\n\n/**\n * Initialize level\n *  - show correct info on level start screen\n *  - pause for level screen\n *  - reset game elements\n *  - start game animation\n */\nfunction initLevel() {\n\tLEVEL_START_TITLE.textContent = `LEVEL ${level}`;\n\tLEVEL_START_SCREEN.style.display = 'flex';\n\tKEYS = {\n\t\tLEFT: false,\n\t\tRIGHT: false,\n\t\tUP: false,\n\t\tSPACE: false,\n\t};\n\t\n\tsetTimeout(() => {\n\t\tLEVEL_START_SCREEN.style.display = 'none';\n\t\troids = [];\n\t\tbullets = [];\n\t\thitPoints = [];\n\t\tstars = [];\n\t\tplayer = new Player(canvas, ctx, { x: canvas.width / 2, y: canvas.height / 2 }, COLORS.SHIP);\n\t\t\n\t\tcurrentLevel = LEVELS[level - 1];\n\t\tfor (let i = 0; i < currentLevel.numberOfRoids; i++) {\n\t\t\troids.push(new Roid(canvas, ctx, null, currentLevel.maxRoidGrade, currentLevel.maxRoidSpeed, COLORS.ROIDS, null));\n\t\t}\n\t\tfor (let i = 0; i < NUM_OF_STARS; i++) {\n\t\t\tstars.push(new Star(canvas, ctx, COLORS.STAR));\n\t\t}\n\t\trequestAnimationFrame(gameloop);\n\t\t\n\t}, LEVEL_START_SCREEN_DURATION);\n}\n\n/**\n * Game loop\n *  - clear canvas\n *  - update game elements\n *  - render game elements\n * @param time\n */\nfunction gameloop(time: number) {\n\tctx.fillStyle = COLORS.BG;\n\tctx.fillRect(0,0,canvas.width, canvas.height);\n\t\n\tconst elapsedTimeBetweenFrames = time - prevTime;\n\tprevTime = time;\n\taccumulatedFrameTime += elapsedTimeBetweenFrames;\n\twhile (accumulatedFrameTime >= FRAME_DURATION) {\n\t\t// UPDATE GAME ELEMENTS\n\t\tplayer.update(KEYS);\n\t\t\n\t\tupdateBullets();\n\t\tcheckPlayerRoidsCollisions();\n\t\tcheckBulletsRoidsCollisions();\n\t\tfor (const roid of roids) {\n\t\t\troid.update();\n\t\t}\n\t\tupdatePoints();\n\t\tpowerUp && updatePowerUp();\n\t\tpowerUp && checkPowerUpFade();\n\t\t\n\t\taccumulatedFrameTime -= FRAME_DURATION;\n\t}\n\t\n\t// RENDER GAME ELEMENTS\n\tif (GAME_STATE === GameState.GAME && roids.length) {\n\t\trenderGame();\n\t\trequestAnimationFrame(gameloop);\n\t}\n}\n\n/**\n * Render all game elements\n */\nfunction renderGame() {\n\tinfos.update(level, lives, score);\n\tplayer.draw();\n\tfor (const bullet of bullets) {\n\t\tbullet.draw();\n\t}\n\tfor (const roid of roids) {\n\t\troid.draw();\n\t}\n\tfor (const hitPoint of hitPoints) {\n\t\thitPoint.draw();\n\t}\n\tfor (const star of stars) {\n\t\tstar.draw();\n\t}\n\tpowerUp && powerUp.draw();\n}\n\n/**\n * Update bullet array\n *  - if bullet is out of bounds, remove bullet\n *  - if bullet still visible update the position\n */\nfunction updateBullets() {\n\tif (bullets.length) {\n\t\tfor (let i = bullets.length; i > 0; i--) {\n\t\t\tconst bullet = bullets[i-1];\n\t\t\tif (bullet.pos.x > canvas.width || bullet.pos.x < 0\n\t\t\t\t|| bullet.pos.y > canvas.height || bullet.pos.y < 0) {\n\t\t\t\tbullets.splice(i - 1, 1);\n\t\t\t} else {\n\t\t\t\tbullet.update();\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Check if any roid was hit by a bullet\n *  if so:\n *      - remove roid\n *      - remove bullet\n *      - add new roids (if needed)\n *      - show points\n *      - add points to score\n *      - add Power Up\n *      - Check new level / win screen\n */\nfunction checkBulletsRoidsCollisions(): void {\n\tfor (let i = bullets.length; i > 0; i--) {\n\t\tfor (let j = roids.length; j > 0; j--) {\n\t\t\tif (areTwoElementsColliding(bullets[i -1], roids[j - 1])) {\n\t\t\t\tconst roid = roids[j - 1];\n\t\t\t\tbullets.splice(i - 1, 1);\n\t\t\t\tif (roid.grade > 1) {\n\t\t\t\t\troids.push(new Roid(\n\t\t\t\t\t\tcanvas,\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\troid.grade - 1,\n\t\t\t\t\t\tcurrentLevel.maxRoidGrade,\n\t\t\t\t\t\tcurrentLevel.maxRoidSpeed,\n\t\t\t\t\t\tCOLORS.ROIDS,\n\t\t\t\t\t\t{x: roid.pos.x + 1, y: roid.pos.y + 1}\n\t\t\t\t\t));\n\t\t\t\t\troids.push(new Roid(\n\t\t\t\t\t\tcanvas,\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\troid.grade - 1,\n\t\t\t\t\t\tcurrentLevel.maxRoidGrade,\n\t\t\t\t\t\tcurrentLevel.maxRoidSpeed,\n\t\t\t\t\t\tCOLORS.ROIDS,\n\t\t\t\t\t\t{x: roid.pos.x - 1, y: roid.pos.y - 1}\n\t\t\t\t\t));\n\t\t\t\t}\n\t\t\t\thitPoints.push(new HitPoint(ctx, roid.pos, roid.points, COLORS.POINTS));\n\t\t\t\troids.splice(j - 1, 1);\n\t\t\t\tscore += roid.points;\n\t\t\t\t\n\t\t\t\tif (roids.length && !powerUp) {\n\t\t\t\t\taddPowerUp();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn checkBulletsRoidsCollisions();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tif (lives > 0 && !roids.length) {\n\t\tif (level !== LEVELS.length) {\n\t\t\tlevel++;\n\t\t\tinitLevel();\n\t\t} else {\n\t\t\tsetGameState(GameState.WIN);\n\t\t}\n\t}\n}\n\n/**\n * Add power up\n */\nfunction addPowerUp() {\n\tif (Math.random() < ADD_POWERUP_PROBABILITY) {\n\t\tpowerUp = new PowerUp(canvas, ctx, COLORS.POWER_UP);\n\t}\n}\n\n/**\n * Update power up\n *  - Check if hit by bullet\n *      - remove power up\n *      - remove bullet\n *      - add power up points / live\n *  - update power up position\n */\nfunction updatePowerUp() {\n\tfor (let i = bullets.length; i > 0; i--) {\n\t\tif (bullets[i-1] && powerUp && areTwoElementsColliding(bullets[i -1], powerUp!)) {\n\t\t\tbullets.splice(i - 1, 1);\n\t\t\thitPoints.push(new HitPoint(ctx, powerUp!.pos, powerUp!.bonusPoints, COLORS.POWER_UP));\n\t\t\tif (powerUp!.type === 'bonus') {\n\t\t\t\tscore += +powerUp!.bonusPoints;\n\t\t\t} else if (powerUp!.type === 'live') {\n\t\t\t\tlives++;\n\t\t\t}\n\t\t\tpowerUp = null;\n\t\t}\n\t}\n\t\n\tpowerUp && powerUp.update();\n}\n\n/**\n * Check if power up has faded\n *  - remove power up\n */\nfunction checkPowerUpFade() {\n\tif (powerUp?.opacity === 0) {\n\t\tpowerUp = null;\n\t}\n}\n\n/**\n * Check collision between player and roids\n *  - remove live\n *  - set game over (if no more lives)\n */\nfunction checkPlayerRoidsCollisions() {\n\tif (player.isInvincible) return;\n\t\n\tfor (let i = roids.length; i > 0; i--) {\n\t\tif (areTwoElementsColliding(player, roids[i - 1])) {\n\t\t\tshowPlayerHitCanvasBorder();\n\t\t\tplayer.startInvincibility();\n\t\t\tlives--;\n\t\t}\n\t}\n\t\n\tif (lives === 0) {\n\t\tsetGameState(GameState.GAME_OVER);\n\t}\n}\n\n/**\n * Update points\n *  - update position\n *  - remove points that have faded out\n */\nfunction updatePoints() {\n\tfor (let i = hitPoints.length; i > 0; i--) {\n\t\tconst hitPoint = hitPoints[i - 1];\n\t\tif (hitPoint.opacity > 0) {\n\t\t\thitPoint.update();\n\t\t} else {\n\t\t\thitPoints.splice(i - 1, 1);\n\t\t}\n\t}\n}\n\n/**\n * Show canvas border when player is hit\n */\nfunction showPlayerHitCanvasBorder() {\n\tcanvas.classList.add('canvas--player-hit');\n\t\n\tcanvas.addEventListener('animationend', (event: AnimationEvent) => {\n\t\tif (event.animationName === 'canvasBorderAnimation') {\n\t\t\tcanvas.classList.remove('canvas--player-hit');\n\t\t}\n\t});\n}\n\n/**\n * Update hi-scores\n *  - If score is hi-score, prompt name and save to local storage\n *  - Show hi-scores\n */\nfunction updateSavedScore() {\n\tconst hiScores = getScore(STORE_NAME);\n\tif (GAME_STATE === GameState.WIN || GAME_STATE === GameState.GAME_OVER) {\n\t\tfor (let i = 0; i < AMOUNT_OF_HIGHSCORES; i++) {\n\t\t\tif (hiScores[i] && hiScores[i]!.score >= score) {\n\t\t\t\tcontinue;\n\t\t\t} else {\n\t\t\t\tlet userName = window.prompt('Well done, you have one of the top 3 scores. What is your user name?');\n\t\t\t\tif (!userName) userName = 'n/a';\n\t\t\t\t//hiScores[i] = { name: userName.trim(), score: score };\n\t\t\t\thiScores.splice(i, 0, { name: userName.trim(), score: score });\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\thiScores.length = AMOUNT_OF_HIGHSCORES;\n\t\tsaveScore(STORE_NAME, hiScores);\n\t}\n\t\n\tfor (let i = 0; i < AMOUNT_OF_HIGHSCORES; i++) {\n\t\tconst hiScoreName = hiScores[i]?.name ? hiScores[i]?.name : '---';\n\t\tconst hiScoreScore = hiScores[i]?.score ? hiScores[i]?.score : '---';\n\t\tHISCORE_ELEMENTS[i].textContent = `${i + 1}. ${hiScoreName}: ${hiScoreScore}`;\n\t}\n}\n\n// Init app if desktop device\nif (isDesktop) {\n\tinit();\n}\n\n"],"names":[],"mappings":"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"}